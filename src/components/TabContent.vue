
<template>
  <el-upload
    class="upload"
    drag
    action="https://jsonplaceholder.typicode.com/posts/"
    :on-success="success"
    v-if="showUpload"
    >
    <i class="el-icon-upload"></i>
    <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
    <template #tip>
      <div class="el-upload__tip">
        只能上传 txt/excel 文件，且不超过 500kb
      </div>
    </template>
  </el-upload>
  <el-table
    :data="tableData"
    style="width: 100%"
    height="540"
    border
    v-if="showTable"
    :cell-class-name="tableCellClassName" 
    @cell-click="cellClick"
>
    <el-table-column
      fixed
      type="index"
      :index="indexMethod"
      header-align="center"
      align="center"
      >
    </el-table-column>
    <el-table-column
      v-for="(key, index) in columnConfig" :key="index"
      :prop="key"
      :label="key"
      header-align="center"
      align="center"
      >
    </el-table-column>
  </el-table>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue'

export default defineComponent({
    name: 'TabContent',

    setup() {
      const showUpload = ref(false)
      const showTable = ref(true)
      const columnConfig: string[] = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24']
      
      const indexMethod = (index: number) => {
        return String.fromCharCode(65+index)
      }
        
      const success = (response: any, file: any, fileList: any) => {
        showUpload.value = false
        showTable.value = true
        
      }
      const tableData = [{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,},{1: 11,2: 11,3: 11,4: 11,5: 200333,6: 200333,7: 200333,8: 200333,9: 200333,10: 200333,11: 200333,12: 200333,13: 200333,14: 200333,15: 200333,16: 200333,17: 200333,18: 200333,19: 200333,20: 200333,21: 200333,22: 200333,23: 200333,24: 200333,}, ]

      const tableCellClassName= (item: {row: any; column: any; rowIndex: any; columnIndex: any}) => {//注意这里是解构
        //利用单元格的 className 的回调方法，给行列索引赋值
        item.row.index = item.rowIndex
        // item.column.index = item.columnIndex
      }
      const cellClick = (row:  any , column:  any , cell: any, event: any) =>{
        // 打印行 从 0 开始
        console.log(row.index);

        // 打印列 从 1 开始
        console.log(column.property);

        // 获取单元格的值
        console.log(row[column.property]);
      }

      return {
        tableCellClassName,
        cellClick,
        showUpload,
        showTable,
        success,
        indexMethod,
        columnConfig,
        tableData: tableData,
      }
    },
})
</script>